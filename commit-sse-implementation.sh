#!/bin/bash
# Generated by Kiro
# Script to commit and push SSE implementation

echo "ðŸš€ Committing SSE Implementation (Task 2.6)"
echo "=========================================="

# Add all SSE-related files
git add apps/api/src/modules/rooms/redis.service.ts
git add apps/api/src/modules/rooms/sse.service.ts
git add apps/api/src/modules/rooms/types/agent-log.types.ts
git add apps/api/src/modules/rooms/index.ts
git add apps/api/src/modules/rooms/SSE_README.md
git add apps/api/src/modules/rooms/rooms-sse.spec.ts
git add apps/api/src/modules/rooms/sse.example.test.ts
git add apps/api/src/modules/rooms/rooms.controller.ts
git add apps/api/src/modules/rooms/rooms.service.ts
git add apps/api/src/modules/rooms/rooms.module.ts
git add apps/api/package.json
git add apps/api/test-sse-integration.js
git add docs/SSE_IMPLEMENTATION_REPORT.md
git add TEST_RESULTS.md
git add .kiro/specs/haunted-ai/tasks.md

echo "âœ… Files staged"

# Commit with descriptive message
git commit -m "feat: Implement Server-Sent Events for live logs (Task 2.6)

Generated by Kiro

## Implementation Summary
- âœ… RedisService for pub/sub messaging
- âœ… SSEService for real-time log streaming
- âœ… New endpoint: GET /api/v1/rooms/:id/logs
- âœ… RoomsService.emitLog() method
- âœ… Heartbeat mechanism (30s)
- âœ… Auto-cleanup on disconnect
- âœ… JWT authentication
- âœ… Comprehensive error handling

## Files Added
- apps/api/src/modules/rooms/redis.service.ts
- apps/api/src/modules/rooms/sse.service.ts
- apps/api/src/modules/rooms/types/agent-log.types.ts
- apps/api/src/modules/rooms/index.ts
- apps/api/src/modules/rooms/SSE_README.md
- apps/api/src/modules/rooms/rooms-sse.spec.ts
- apps/api/src/modules/rooms/sse.example.test.ts
- apps/api/test-sse-integration.js
- docs/SSE_IMPLEMENTATION_REPORT.md

## Files Modified
- apps/api/src/modules/rooms/rooms.controller.ts
- apps/api/src/modules/rooms/rooms.service.ts
- apps/api/src/modules/rooms/rooms.module.ts
- apps/api/package.json
- TEST_RESULTS.md
- .kiro/specs/haunted-ai/tasks.md

## Requirements Validated
- âœ… Requirement 5.1: Agent operations emit logs
- âœ… Requirement 5.2: Log messages with timestamp and agent type

## Testing
- âœ… 18 unit tests created (ready for Redis)
- âœ… Integration test script created
- âœ… Comprehensive documentation

## Next Steps
- Task 2.7: Property-based tests for live logging
- Integration with Orchestrator service (Task 5)

Co-authored-by: Kiro <kiro@hauntedai.dev>"

echo "âœ… Committed"

# Push to GitHub
git push origin main

echo "âœ… Pushed to GitHub"
echo ""
echo "ðŸŽ‰ SSE Implementation successfully committed and pushed!"
echo ""
echo "ðŸ“Š Summary:"
echo "  - Task 2.6: COMPLETE âœ…"
echo "  - Files added: 9"
echo "  - Files modified: 6"
echo "  - Unit tests: 18"
echo "  - Integration tests: 1"
echo ""
echo "ðŸ”— View on GitHub:"
echo "  https://github.com/YOUR_USERNAME/HauntedAI"
